(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{ZQeO:function(e,t,a){},tjUo:function(e,t,a){"use strict";a.r(t);var n=a("q1tI"),l=a.n(n),i=a("i8i4"),s=a.n(i);a("ZQeO");function r(e,t){var a={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var n in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?a[n]:("00"+a[n]).substr((""+a[n]).length)));return e}function d({info:e}){return console.log(e),e.length>0?l.a.createElement("p",{className:"info"},e):null}class o extends l.a.Component{render(){const e=this.props.qrIdItem,t=new Date(e.time);return l.a.createElement("tr",{className:this.props.isExist?"exist":""},l.a.createElement("td",null,this.props.qrIdItemIndex),l.a.createElement("td",null,e.qrId),l.a.createElement("td",null,r("yyyy-MM-dd hh:mm:ss",t)),l.a.createElement("td",null,l.a.createElement("button",{onClick:()=>this.props.delButton(e.time)},"删除")))}}class c extends l.a.Component{render(){let e={},t=!1;const a=[];return this.props.qrIdList.forEach((n,i)=>{e[n.qrId]?t=!0:(e[n.qrId]=!0,t=!1),a.push(l.a.createElement(o,{key:n.time,qrIdItem:n,qrIdItemIndex:i+1,isExist:t,delButton:this.props.delButton}))}),a.reverse(),l.a.createElement("table",null,l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("th",null,"序号"),l.a.createElement("th",null,"条码"),l.a.createElement("th",null,"扫描时间"),l.a.createElement("th",null)),a))}}var m=class extends l.a.Component{constructor(e){super(e),this.state={idList:[],info:""},this.addQrId=this.addQrId.bind(this),this.delQrId=this.delQrId.bind(this),this.exportData=this.exportData.bind(this),this.importData=this.importData.bind(this),this.importDataClick=this.importDataClick.bind(this)}componentWillMount(){localStorage.getItem("idList")&&this.setState({idList:JSON.parse(localStorage.getItem("idList"))})}componentDidUpdate(){localStorage.setItem("idList",JSON.stringify(this.state.idList))}addQrId(e){let t=e.target.value;this.timer&&clearTimeout(this.timer),this.timer=setTimeout(()=>{let e=this.state.idList,a={qrId:t,time:Date.now()};this.setState({idList:[...e,a]}),this.refs.inputId.value=""},200)}delQrId(e){this.setState({idList:this.state.idList.filter(t=>t.time!==e)})}exportData(){!function(e,t){var a=document.createElement("a");a.download=e,a.style.display="none";var n=new Blob([t]);a.href=URL.createObjectURL(n),document.body.appendChild(a),a.click(),document.body.removeChild(a)}("条码扫码记录器数据备份_"+r("yyyy-MM-dd hh:mm:ss",new Date)+".txt",JSON.stringify(this.state.idList))}importData(){let e="",t=this;const a=document.getElementById("files").files[0],n=a.name,l=(a.size,new FileReader);l.readAsText(a),l.onload=function(){e=this.result,t.setState({idList:JSON.parse(e),info:`${n} 导入成功！`})}}importDataClick(){document.getElementById("files").click()}render(){return l.a.createElement("div",null,l.a.createElement("h1",null,"条码扫码记录器 v0.2.3"),l.a.createElement("fieldset",{disabled:"disabled"},l.a.createElement("legend",null,"使用说明："),l.a.createElement("ul",null,l.a.createElement("li",null,"- 新添加数据只在单台电脑及单独浏览器上储存"),l.a.createElement("li",null,"- 不同电脑及不同浏览器可以通过原始备份导出数据，再导入备份数据完成，然后可以继续添加数据。"),l.a.createElement("li",null,"- 导入备份数据会覆盖当前电脑浏览器页面上的所有数据！"),l.a.createElement("li",null,"- 推荐使用",l.a.createElement("a",{href:"https://www.google.com/chrome/",target:"_blank"},"Chrome浏览器")))),l.a.createElement("div",null,l.a.createElement("input",{className:"qr-input",placeholder:"请点击此输入框开始扫码录入",ref:"inputId",type:"text",onChange:this.addQrId}),l.a.createElement("button",{className:"btn",onClick:this.exportData},"备份导出数据"),l.a.createElement("input",{type:"file",id:"files",style:{display:"none"},onChange:this.importData}),l.a.createElement("button",{className:"btn",onClick:this.importDataClick},"导入备份数据"),l.a.createElement(d,{info:this.state.info})),l.a.createElement(c,{qrIdList:this.state.idList,delButton:this.delQrId}))}};const h=document.createElement("div");h.id="app",h.className="app",document.body.appendChild(h),s.a.render(l.a.createElement(m,null),document.getElementById("app"))}},[["tjUo",0,1]]]);