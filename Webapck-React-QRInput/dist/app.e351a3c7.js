(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{ZQeO:function(e,t,n){},tjUo:function(e,t,n){"use strict";n.r(t);var a=n("q1tI"),l=n.n(a),i=n("i8i4"),s=n.n(i);n("ZQeO");function r(e,t){var n={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};for(var a in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+a+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?n[a]:("00"+n[a]).substr((""+n[a]).length)));return e}function d({info:e}){return e.length>0?l.a.createElement("p",{className:"info"},e):null}class o extends l.a.Component{render(){const e=this.props.qrIdItem,t=new Date(e.time);return l.a.createElement("tr",{className:this.props.isExist?"exist":""},l.a.createElement("td",null,this.props.qrIdItemIndex),l.a.createElement("td",null,e.qrId),l.a.createElement("td",null,r("yyyy-MM-dd hh:mm:ss",t)),l.a.createElement("td",null,l.a.createElement("button",{onClick:()=>this.props.delButton(e.time)},"删除")))}}class c extends l.a.Component{render(){let e={},t=!1;const n=[];return this.props.qrIdList.forEach((a,i)=>{e[a.qrId]?t=!0:(e[a.qrId]=!0,t=!1),n.push(l.a.createElement(o,{key:a.time,qrIdItem:a,qrIdItemIndex:i+1,isExist:t,delButton:this.props.delButton}))}),n.reverse(),l.a.createElement("table",null,l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("th",null,"序号"),l.a.createElement("th",null,"条码"),l.a.createElement("th",null,"扫描时间"),l.a.createElement("th",null)),n))}}var m=class extends l.a.Component{constructor(e){super(e),this.state={idList:[],info:""},this.addQrId=this.addQrId.bind(this),this.delQrId=this.delQrId.bind(this),this.exportData=this.exportData.bind(this),this.importData=this.importData.bind(this),this.importDataClick=this.importDataClick.bind(this)}componentWillMount(){localStorage.getItem("idList")&&this.setState({idList:JSON.parse(localStorage.getItem("idList"))})}componentDidUpdate(){localStorage.setItem("idList",JSON.stringify(this.state.idList))}addQrId(e){let t=e.target.value;this.timer&&clearTimeout(this.timer),this.timer=setTimeout(()=>{let e=this.state.idList,n={qrId:t,time:Date.now()};this.setState({idList:[...e,n]}),this.refs.inputId.value=""},200)}delQrId(e){this.setState({idList:this.state.idList.filter(t=>t.time!==e)})}exportData(){const e=this;if(!function(e,t){let n={},a=[];for(let l=0;l<e.length;l++){const i=e[l];if(n[i[t]])return!1;n[i[t]]=!0,a.push(i)}return!0}(this.state.idList,"qrId"))return e.setState({info:"请删除重复后再导出"}),!1;!function(e,t){var n=document.createElement("a");n.download=e,n.style.display="none";var a=new Blob([t]);n.href=URL.createObjectURL(a),document.body.appendChild(n),n.click(),document.body.removeChild(n)}("条码扫码记录器数据备份_"+r("yyyy-MM-dd hh:mm:ss",new Date)+".txt",JSON.stringify(this.state.idList))}importData(){let e="";const t=this,n=document.getElementById("files").files[0],a=n.name,l=(n.size,new FileReader);l.readAsText(n),l.onload=function(){e=this.result;let n=[];""!=t.state.idList&&(n=t.state.idList),n=function(e,t){let n={},a=[];return e.forEach(e=>{n[e[t]]||(n[e[t]]=!0,a.push(e))}),a}(n=[...n,...JSON.parse(e)],"qrId"),t.setState({idList:n,info:`${a} 导入成功！`})}}importDataClick(){document.getElementById("files").click()}render(){return l.a.createElement("div",null,l.a.createElement("h1",null,"条码扫码记录器 v0.2.4"),l.a.createElement("fieldset",null,l.a.createElement("legend",null,"功能说明："),l.a.createElement("p",null,"选定输入框，扫码枪单条扫码录入，在本地浏览器记录录入数据，高亮重复数据，通过导出导入数据文本，实现不同浏览器数据互通")),l.a.createElement("fieldset",{disabled:"disabled"},l.a.createElement("legend",null,"使用说明："),l.a.createElement("ul",null,l.a.createElement("li",null,"- 新添加数据只在单台电脑及单独浏览器上储存"),l.a.createElement("li",null,"- 不同电脑及不同浏览器可以通过原始备份导出数据，再导入备份数据完成，然后可以继续添加数据。"),l.a.createElement("li",null,"- 支持导入多份数据，自动去除多份数据中重复部分。"),l.a.createElement("li",null,"- 导入备份数据会合并当前电脑浏览器页面上的所有数据。"),l.a.createElement("li",null,"- 推荐使用",l.a.createElement("a",{href:"https://www.google.com/chrome/",target:"_blank"},"Chrome浏览器")))),l.a.createElement("div",null,l.a.createElement("input",{className:"qr-input",placeholder:"请点击此输入框开始扫码录入",ref:"inputId",type:"text",onChange:this.addQrId}),l.a.createElement("button",{className:"btn",onClick:this.exportData},"备份导出数据"),l.a.createElement("input",{type:"file",id:"files",style:{display:"none"},onChange:this.importData}),l.a.createElement("button",{className:"btn",onClick:this.importDataClick},"导入备份数据"),l.a.createElement(d,{info:this.state.info})),l.a.createElement(c,{qrIdList:this.state.idList,delButton:this.delQrId}))}};const u=document.createElement("div");u.id="app",u.className="app",document.body.appendChild(u),s.a.render(l.a.createElement(m,null),document.getElementById("app"))}},[["tjUo",0,1]]]);